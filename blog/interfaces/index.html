<!DOCTYPE html>
<html lang="en-us"><head>
  <meta charset="utf-8">
  <title>Cesar Rodriguez | Personal blog</title>

  <!-- mobile responsive meta -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="frida scripting guide interfaces">
  <meta name="author" content="Cesar Rodriguez">
  <meta name="generator" content="Hugo 0.70.0" />

  <!-- plugins -->
  
  <link rel="stylesheet" href="https://cesar-rodriguez.com.ar/plugins/bootstrap/bootstrap.min.css ">
  
  <link rel="stylesheet" href="https://cesar-rodriguez.com.ar/plugins/slick/slick.css ">
  
  <link rel="stylesheet" href="https://cesar-rodriguez.com.ar/plugins/themify-icons/themify-icons.css ">
  
  <link rel="stylesheet" href="https://cesar-rodriguez.com.ar/plugins/venobox/venobox.css ">
  

  <!-- Main Stylesheet -->
  
  <link rel="stylesheet" href="https://cesar-rodriguez.com.ar/scss/style.min.css" media="screen">

  <!--Favicon-->
  <link rel="shortcut icon" href="https://cesar-rodriguez.com.ar/images/favicon.png " type="image/x-icon">
  <link rel="icon" href="https://cesar-rodriguez.com.ar/images/favicon.png " type="image/x-icon">

</head><body>
<!-- preloader start -->
<div class="preloader">
  
</div>
<!-- preloader end -->
<!-- navigation -->
<header class="navigation">
  <div class="container">
    
    <nav class="navbar navbar-expand-lg navbar-white bg-transparent border-bottom pl-0">
      <a class="navbar-brand mobile-view" href="https://cesar-rodriguez.com.ar"><img class="img-fluid" style="max-height: 5rem;"
          src="https://cesar-rodriguez.com.ar/images/logo-hermosa2.png" alt="Cesar Rodriguez | Personal blog"></a>
      <button class="navbar-toggler border-0" type="button" data-toggle="collapse" data-target="#navigation">
        <i class="ti-menu h3"></i>
      </button>

      <div class="collapse navbar-collapse text-center" id="navigation">
        <div class="desktop-view">
          <ul class="navbar-nav mr-auto">
            
            <li class="nav-item">
              <a class="nav-link" href="https://twitter.com/warlockk87"><i class="ti-twitter-alt"></i></a>
            </li>
            
            <li class="nav-item">
              <a class="nav-link" href="https://github.com/CesarMRodriguez"><i class="ti-github"></i></a>
            </li>
            
            <li class="nav-item">
              <a class="nav-link" href="https://www.linkedin.com/in/cesar-mario-rodriguez/"><i class="ti-linkedin"></i></a>
            </li>
            
          </ul>
        </div>

        <a class="navbar-brand mx-auto desktop-view" href="https://cesar-rodriguez.com.ar"><img class="img-fluid" style="max-height: 5rem;"
            src="https://cesar-rodriguez.com.ar/images/logo-hermosa2.png" alt="Cesar Rodriguez | Personal blog"></a>

        <ul class="navbar-nav">
          
          
          <li class="nav-item">
            <a class="nav-link" href="https://cesar-rodriguez.com.ar/about">About</a>
          </li>
          
          
          
          <li class="nav-item">
            <a class="nav-link" href="https://cesar-rodriguez.com.ar/blog">Post</a>
          </li>
          
          
          
          <li class="nav-item">
            <a class="nav-link" href="https://cesar-rodriguez.com.ar/contact">Contact</a>
          </li>
          
          
        </ul>

        
        <!-- search -->
        <div class="search pl-lg-4">
          <button id="searchOpen" class="search-btn"><i class="ti-search"></i></button>
          <div class="search-wrapper">
            <form action="https://cesar-rodriguez.com.ar/search" class="h-100">
              <input class="search-box px-4" id="search-query" name="s" type="search" placeholder="Type & Hit Enter...">
            </form>
            <button id="searchClose" class="search-close"><i class="ti-close text-dark"></i></button>
          </div>
        </div>
        

        
      </div>
    </nav>
  </div>
</header>
<!-- /navigation -->

<section class="section-sm">
  <div class="container">
    <div class="row">
      <div class="col-lg-8 mx-auto">
        
        <a href="/categories/frida"
          class="text-primary">Frida</a>
        
        <a href="/categories/android"
          class="text-primary">Android</a>
        
        <h2>Frida Scripting Guide (9) - Interfaces</h2>
        <div class="mb-3 post-meta">
          <span>By Cesar Rodriguez</span>
          
          <span class="border-bottom border-primary px-2 mx-1"></span>
          <span>29 October 2019</span>
          
        </div>
        
        <img src="https://cesar-rodriguez.com.ar/images/featured-post/interfaces.jpeg" class="img-fluid w-100 mb-4" alt="Frida Scripting Guide (9) - Interfaces">
        
        <div class="content mb-5">
          <p>An interface is a reference type in Java. It is similar to class. It is a collection of abstract methods. A class implements an interface, thereby inheriting the abstract methods of the interface.</p>
<p>Along with abstract methods, an interface may also contain constants, default methods, static methods, and nested types. Method bodies exist only for default methods and static methods.</p>
<p>An interface is different from a class in several ways:</p>
<ul>
<li>You cannot instantiate an interface.</li>
<li>An interface does not contain any constructors.</li>
<li>All of the methods in an interface are abstract.</li>
<li>An interface cannot contain instance fields. The only fields that can appear in an interface must be declared both static and final.</li>
<li>An interface is not extended by a class; it is implemented by a class.</li>
</ul>
<p>To test this functionality I&rsquo;ve created in the application an interface called MyInterface, and a class that implements the interface called MyInterfaceClass.</p>
<p>In order to get the interface representation in Frida we use the same code as we would use for a class:</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">MyInterface</span> <span class="o">=</span> <span class="nx">Java</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="s2">&#34;com.blog.testfrida.interfaces.MyInterface&#34;</span><span class="p">);</span>
</code></pre></div><p>We can&rsquo;t intercept or modify the abstract methods exposed by the interface. As an example I tried to implement the getMessage method from the interface in the following way:</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">MyInterface</span><span class="p">.</span><span class="nx">getMessage</span><span class="p">.</span><span class="nx">implementation</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;it gets into the getMessage&#34;</span><span class="p">);</span>
    <span class="k">return</span> <span class="nb">String</span><span class="p">.</span><span class="nx">$new</span><span class="p">(</span><span class="s2">&#34;it works&#34;</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div><p>When we call the getMessage from the implementation of the getMessage method in the MyInterfaceClass, the console.log is not triggered. If we want to change the implementation, we have to do it in each class the abstract method is implemented. In this case we did it on the only class implementing MyInterface:</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">MyInterfaceClass</span> <span class="o">=</span> <span class="nx">Java</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="s2">&#34;com.blog.testfrida.interfaces.MyInterfaceClass&#34;</span><span class="p">);</span>
<span class="nx">MyInterfaceClass</span><span class="p">.</span><span class="nx">getMessage</span><span class="p">.</span><span class="nx">implementation</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;it gets into the getMessage&#34;</span><span class="p">);</span>
    <span class="k">return</span> <span class="nb">String</span><span class="p">.</span><span class="nx">$new</span><span class="p">(</span><span class="s2">&#34;it works&#34;</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div><p>Note that we can&rsquo;t instantiate an interface, it will throw the following error:</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nb">Error</span><span class="o">:</span> <span class="nx">no</span> <span class="nx">supported</span> <span class="nx">overloads</span> 
  <span class="nx">at</span> <span class="nx">makeConstructor</span> <span class="p">(</span><span class="nx">frida</span><span class="o">/</span><span class="nx">node_modules</span><span class="o">/</span><span class="nx">frida</span><span class="o">-</span><span class="nx">java</span><span class="o">-</span><span class="nx">bridge</span><span class="o">/</span><span class="nx">lib</span><span class="o">/</span><span class="kr">class</span><span class="o">-</span><span class="nx">factory</span><span class="p">.</span><span class="nx">js</span><span class="o">:</span><span class="mi">478</span><span class="p">)</span> <span class="p">...</span> 
  <span class="nx">at</span> <span class="o">/</span><span class="nx">examples</span><span class="p">.</span><span class="nx">js</span><span class="o">:</span><span class="mi">434</span>
</code></pre></div><p>When we get an instance of a class that implements an interface, we can call the interfaces&rsquo; methods, but Frida will end up calling the classes implementations as in the following examples:</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="c1">//we get an instance of Interface and call the getMessage
</span><span class="c1"></span><span class="kd">var</span> <span class="nx">interfaceInstance</span> <span class="o">=</span> <span class="nx">MyInterfaceClass</span><span class="p">.</span><span class="nx">getNewInstance</span><span class="p">();</span>

<span class="c1">//internally it calls the getMessage from the MyInterfaceClass
</span><span class="c1"></span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">interfaceInstance</span><span class="p">.</span><span class="nx">getMessage</span><span class="p">());</span>

<span class="c1">//this does not call the default interface, it calls the class one (even when it is
</span><span class="c1">//casted as a MyInterface interface)
</span><span class="c1"></span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">interfaceInstance</span><span class="p">.</span><span class="nx">getInt</span><span class="p">());</span>
</code></pre></div><p>Next: <a href="https://cesar-rodriguez.com.ar/blog/inner-classes/">Inner classes</a></p>

        </div>

        
        
      </div>
    </div>
  </div>
</section>



<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-3 col-sm-6 mb-5">
        <h6 class="mb-4">Contact Me</h6>
        <ul class="list-unstyled">
          <li class="mb-3"><i
                class="ti-twitter mr-3 text-primary"></i>@warlockk87</li>
          <li class="mb-3"><i class="ti-location-pin mr-3 text-primary"></i>Buenos Aires, Argentina</li>
          <li class="mb-3"><a class="text-dark" href="mailto:hohenhaimmaster@email.com"><i
                class="ti-email mr-3 text-primary"></i>hohenhaimmaster@email.com</a>
          </li>
        </ul>
      </div>
      <div class="col-lg-3 col-sm-6 mb-5">
        <h6 class="mb-4">Social Contacts</h6>
        <ul class="list-unstyled">
          
          <li class="mb-3"><a class="text-dark" href="https://twitter.com/warlockk87">twitter</a></li>
          
          <li class="mb-3"><a class="text-dark" href="https://github.com/CesarMRodriguez">github</a></li>
          
          <li class="mb-3"><a class="text-dark" href="https://www.linkedin.com/in/cesar-mario-rodriguez/">linkedin</a></li>
          
        </ul>
      </div>
      <div class="col-lg-3 col-sm-6 mb-5">
        <h6 class="mb-4">Categories</h6>
        <ul class="list-unstyled">
          <li class="mb-3"><a class="text-dark"
              href="/categories/android">Android</a>
          </li>
          <li class="mb-3"><a class="text-dark"
              href="/categories/ctf">Ctf</a>
          </li>
          <li class="mb-3"><a class="text-dark"
              href="/categories/frida">Frida</a>
          </li>
          <li class="mb-3"><a class="text-dark"
              href="/categories/misc">Misc</a>
          </li>
        </ul>
      </div>
      <div class="col-lg-3 col-sm-6 mb-5">
        <h6 class="mb-4">Quick Links</h6>
        <ul class="list-unstyled">
          
          <li class="mb-3"><a class="text-dark" href="https://cesar-rodriguez.com.ar/about">About</a></li>
          
          <li class="mb-3"><a class="text-dark" href="https://cesar-rodriguez.com.ar/blog">Post</a></li>
          
          <li class="mb-3"><a class="text-dark" href="https://cesar-rodriguez.com.ar/contact">Contact</a></li>
          
        </ul>
      </div>
      <div class="col-12 border-top py-4 text-center">
        | copyright © 2020 <a href="https://cesar-rodriguez.com.ar">Cesar Rodriguez</a> All Rights Reserved |
      </div>
    </div>
  </div>
</footer>

<script>
  var indexURL = "https://cesar-rodriguez.com.ar/index.json"
</script>

<!-- JS Plugins -->

<script src="https://cesar-rodriguez.com.ar/plugins/jQuery/jquery.min.js"></script>

<script src="https://cesar-rodriguez.com.ar/plugins/bootstrap/bootstrap.min.js"></script>

<script src="https://cesar-rodriguez.com.ar/plugins/slick/slick.min.js"></script>

<script src="https://cesar-rodriguez.com.ar/plugins/venobox/venobox.min.js"></script>

<script src="https://cesar-rodriguez.com.ar/plugins/search/fuse.min.js"></script>

<script src="https://cesar-rodriguez.com.ar/plugins/search/mark.js"></script>

<script src="https://cesar-rodriguez.com.ar/plugins/search/search.js"></script>

<!-- Main Script -->

<script src="https://cesar-rodriguez.com.ar/js/script.min.js"></script>
<!-- google analitycs -->
<script>
  (function (i, s, o, g, r, a, m) {
    i['GoogleAnalyticsObject'] = r;
    i[r] = i[r] || function () {
      (i[r].q = i[r].q || []).push(arguments)
    }, i[r].l = 1 * new Date();
    a = s.createElement(o),
      m = s.getElementsByTagName(o)[0];
    a.async = 1;
    a.src = g;
    m.parentNode.insertBefore(a, m)
  })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
  ga('create', 'Your ID', 'auto');
  ga('send', 'pageview');
</script></body>
</html>